(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define([],b):'object'==typeof exports?exports.Civ5Save=b():a.Civ5Save=b()})(this,function(){var a=String.fromCharCode;return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=5)}([function(a,b){'use strict';b.a=class{constructor(a,b){this.byteOffset=a,this.length=b}}},function(a,b,c){'use strict';var d=c(0);class e extends d.a{getValue(a){if(1===this.length)return a.getUint8(this.byteOffset);return 4===this.length?a.getUint32(this.byteOffset,!0):void 0}setValue(a,b){1===this.length?a.setUint8(this.byteOffset,b):4===this.length&&a.setUint32(this.byteOffset,b,!0)}}b.a=e},function(a,b,c){'use strict';var d=c(0);class e extends d.a{constructor(a,b,c){super(a,b),this._isNullOrUndefined(this.length)&&(this.length=this._getStringLength(c,this.byteOffset)+4)}_isNullOrUndefined(a){return'undefined'==typeof a||null===a}_getStringLength(a,b){return a.getUint32(b,!0)}getValue(a){return a.getString(this.byteOffset+4,this.length-4)}}b.a=e},function(b,c){'use strict';class d extends DataView{getString(b,c){let d='';for(let e=b;e<b+c;e++)d+=a(this.getUint8(e));return d}}c.a=d},function(a,b,c){'use strict';var d=c(0);class e extends d.a{getValue(a){if(1===this.length)return!!a.getUint8(this.byteOffset);return 4===this.length?!!a.getUint32(this.byteOffset,!0):void 0}setValue(a,b){1===this.length?a.setUint8(this.byteOffset,+b):4===this.length&&a.setUint32(this.byteOffset,+b,!0)}}b.a=e},function(b,c,d){'use strict';Object.defineProperty(c,'__esModule',{value:!0});var e=d(3),f=d(6),g=d.n(f),h=d(7);class i{constructor(a){this._saveData=new e.a(a.buffer),this._verifyFileSignature(),this._gameBuild=this._getGameBuild(),this._properties=this._getProperties()}static async fromFile(a){let b=await i.loadData(a);return new i(b)}static loadData(a){return new Promise(function(b,c){let d=new FileReader;d.onload=function(){b(new DataView(d.result))},d.onerror=function(){c(d.error)},d.readAsArrayBuffer(a)})}toFile(a){return new File([this._saveData],a,{type:'application/octet-stream'})}_verifyFileSignature(){if('CIV5'!==this._saveData.getString(0,4))throw new Error('File signature does not match. Is this a Civ 5 savegame?')}_getProperties(){let a='',b=0,c=new Map,d=this._getSectionOffsets();for(let e in g.a){if(['playerColours','playerNames2','section23Skip1'].includes(e))continue;let f=Object.assign({},g.a[e]),i=this._getPropertySection(f);if(this._isNullOrUndefined(i))continue;'section30Skip1'==e?c.enabledDLC.getArray().includes('Expansion - Gods and Kings')||c.enabledDLC.getArray().includes('Expansion - Brave New World')?f.length=76:f.length=72:'section30Skip3'==e&&(c.enabledDLC.getArray().includes('Expansion - Brave New World')?f.length=80:c.enabledDLC.getArray().includes('Expansion - Gods and Kings')?f.length=76:f.length=72);let j=null;if(i===b){let b=c[a];try{j=b.byteOffset+b.length}catch(a){break}}else j='privateGame'==e?d[i].start-10:'turnTimerLength'==e?d[i].start-4:d[i-1].start+f.byteOffsetInSection;c[e]=h.a.fromType(f.type,j,f.length,this._saveData),a=e,b=i}return c}_getSectionOffsets(){const a=[64,0,0,0],b=g.a[Object.keys(g.a)[Object.keys(g.a).length-1]],c=b.sectionByBuild[Object.keys(b.sectionByBuild)[Object.keys(b.sectionByBuild).length-1]];let d=new Int8Array(this._saveData.buffer),e=[];e.push({start:0});for(let b=0;b<d.length;b++)if(this._areArraysEqual(d.slice(b,b+4),a)){if(310700>+this.gameBuild){let a=23;if(262623<=+this.gameBuild&&(a=24),e.length===a&&270>b-e[e.length-1].start)continue}let a={start:b};if(e.push(a),e[e.length-2].end=b-1,e.length===c)break}return e}_areArraysEqual(a,b){return a.length==b.length&&a.every(function(a,c){return a===b[c]})}_getPropertySection(a){var b=Number.parseInt;let c=null;for(let d in a.sectionByBuild)b(this.gameBuild)>=b(d)&&(c=a.sectionByBuild[d]);return c}_isNullOrUndefined(a){return'undefined'==typeof a||null===a}get gameBuild(){return this._gameBuild}_getGameBuild(){const b='FINAL_RELEASE',c=function(){let a=[];for(let c=0;c<b.length;c++)a.push(b.charCodeAt(c));return a}();let d=0,e=new Int8Array(this._saveData.buffer);for(let a=0;a<=e.length;a++)if(this._areArraysEqual(e.slice(a,a+c.length),c)){d=a;break}let f='',g=d-2;for(;0!==e.slice(g,g+1)[0];)f=a(e.slice(g,g+1))+f,g--;return f}get gameVersion(){return this._getPropertyIfDefined('gameVersion')}get currentTurn(){return this._getPropertyIfDefined('currentTurn')}get gameMode(){if(230620<=+this.gameBuild)return g.a.gameMode.values[this._properties.gameMode.getValue(this._saveData)]}get player1Civilization(){return this._getBeautifiedPropertyIfDefined('player1Civilization')}get difficulty(){return this._getBeautifiedPropertyIfDefined('difficulty')}get startingEra(){return this._getBeautifiedPropertyIfDefined('startingEra')}get currentEra(){return this._getBeautifiedPropertyIfDefined('currentEra')}get gamePace(){return this._getBeautifiedPropertyIfDefined('gamePace')}get mapSize(){return this._getBeautifiedPropertyIfDefined('mapSize')}get mapFile(){let a=this._getPropertyIfDefined('mapFile');if(!this._isNullOrUndefined(a))return this._beautifyMapFileValue(a)}get enabledDLC(){if(this._properties.hasOwnProperty('enabledDLC'))return this._properties.enabledDLC.getArray()}get maxTurns(){return this._getPropertyIfDefined('maxTurns')}set maxTurns(a){this._properties.maxTurns.setValue(this._saveData,a)}get turnTimerLength(){return this._getPropertyIfDefined('turnTimerLength')}set turnTimerLength(a){this._properties.turnTimerLength.setValue(this._saveData,a)}get privateGame(){return this._getPropertyIfDefined('privateGame')}set privateGame(a){this._properties.privateGame.setValue(this._saveData,a)}get timeVictory(){return this._getPropertyIfDefined('timeVictory')}set timeVictory(a){this._properties.timeVictory.setValue(this._saveData,a)}get scienceVictory(){return this._getPropertyIfDefined('scienceVictory')}set scienceVictory(a){this._properties.scienceVictory.setValue(this._saveData,a)}get dominationVictory(){return this._getPropertyIfDefined('dominationVictory')}set dominationVictory(a){this._properties.dominationVictory.setValue(this._saveData,a)}get culturalVictory(){return this._getPropertyIfDefined('culturalVictory')}set culturalVictory(a){this._properties.culturalVictory.setValue(this._saveData,a)}get diplomaticVictory(){return this._getPropertyIfDefined('diplomaticVictory')}set diplomaticVictory(a){this._properties.diplomaticVictory.setValue(this._saveData,a)}get alwaysPeace(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_ALWAYS_PEACE')}set alwaysPeace(a){this._setNewGameOption('GAMEOPTION_ALWAYS_PEACE',a)}get alwaysWar(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_ALWAYS_WAR')}set alwaysWar(a){this._setNewGameOption('GAMEOPTION_ALWAYS_WAR',a)}get completeKills(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_COMPLETE_KILLS')}set completeKills(a){this._setNewGameOption('GAMEOPTION_COMPLETE_KILLS',a)}get lockMods(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_LOCK_MODS')}set lockMods(a){this._setNewGameOption('GAMEOPTION_LOCK_MODS',a)}get newRandomSeed(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NEW_RANDOM_SEED')}set newRandomSeed(a){this._setNewGameOption('GAMEOPTION_NEW_RANDOM_SEED',a)}get noAncientRuins(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_GOODY_HUTS')}set noAncientRuins(a){this._setNewGameOption('GAMEOPTION_NO_GOODY_HUTS',a)}get noBarbarians(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_BARBARIANS')}set noBarbarians(a){this._setNewGameOption('GAMEOPTION_NO_BARBARIANS',a)}get noChangingWarPeace(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_CHANGING_WAR_PEACE')}set noChangingWarPeace(a){this._setNewGameOption('GAMEOPTION_NO_CHANGING_WAR_PEACE',a)}get noCityRazing(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_CITY_RAZING')}set noCityRazing(a){this._setNewGameOption('GAMEOPTION_NO_CITY_RAZING',a)}get noCultureOverviewUI(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_CULTURE_OVERVIEW_UI')}set noCultureOverviewUI(a){this._setNewGameOption('GAMEOPTION_NO_CULTURE_OVERVIEW_UI',a)}get noEspionage(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_ESPIONAGE')}set noEspionage(a){this._setNewGameOption('GAMEOPTION_NO_ESPIONAGE',a)}get noHappiness(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_HAPPINESS')}set noHappiness(a){this._setNewGameOption('GAMEOPTION_NO_HAPPINESS',a)}get noPolicies(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_POLICIES')}set noPolicies(a){this._setNewGameOption('GAMEOPTION_NO_POLICIES',a)}get noReligion(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_RELIGION')}set noReligion(a){this._setNewGameOption('GAMEOPTION_NO_RELIGION',a)}get noScience(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_SCIENCE')}set noScience(a){this._setNewGameOption('GAMEOPTION_NO_SCIENCE',a)}get noWorldCongress(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_NO_LEAGUES')}set noWorldCongress(a){this._setNewGameOption('GAMEOPTION_NO_LEAGUES',a)}get oneCityChallenge(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_ONE_CITY_CHALLENGE')}set oneCityChallenge(a){this._setNewGameOption('GAMEOPTION_ONE_CITY_CHALLENGE',a)}get pitboss(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_PITBOSS')}set pitboss(a){this._setNewGameOption('GAMEOPTION_PITBOSS',a)}get policySaving(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_POLICY_SAVING')}set policySaving(a){this._setNewGameOption('GAMEOPTION_POLICY_SAVING',a)}get promotionSaving(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_PROMOTION_SAVING')}set promotionSaving(a){this._setNewGameOption('GAMEOPTION_PROMOTION_SAVING',a)}get ragingBarbarians(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_RAGING_BARBARIANS')}set ragingBarbarians(a){this._setNewGameOption('GAMEOPTION_RAGING_BARBARIANS',a)}get randomPersonalities(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_RANDOM_PERSONALITIES')}set randomPersonalities(a){this._setNewGameOption('GAMEOPTION_RANDOM_PERSONALITIES',a)}get turnTimerEnabled(){return this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_END_TURN_TIMER_ENABLED')}set turnTimerEnabled(a){this._setNewGameOption('GAMEOPTION_END_TURN_TIMER_ENABLED',a)}get turnType(){if(!0===this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_DYNAMIC_TURNS'))return i.TURN_TYPES.HYBRID;return!0===this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_SIMULTANEOUS_TURNS')?i.TURN_TYPES.SIMULTANEOUS:!1===this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_DYNAMIC_TURNS')&&!1===this._properties.gameOptionsMap.getValue(this._saveData,'GAMEOPTION_SIMULTANEOUS_TURNS')?i.TURN_TYPES.SEQUENTIAL:void 0}set turnType(a){a===i.TURN_TYPES.HYBRID?(this._setNewGameOption('GAMEOPTION_DYNAMIC_TURNS',!0),this._setNewGameOption('GAMEOPTION_SIMULTANEOUS_TURNS',!1)):a===i.TURN_TYPES.SIMULTANEOUS?(this._setNewGameOption('GAMEOPTION_DYNAMIC_TURNS',!1),this._setNewGameOption('GAMEOPTION_SIMULTANEOUS_TURNS',!0)):a===i.TURN_TYPES.SEQUENTIAL&&(this._setNewGameOption('GAMEOPTION_DYNAMIC_TURNS',!1),this._setNewGameOption('GAMEOPTION_SIMULTANEOUS_TURNS',!1))}_getPropertyIfDefined(a){if(this._properties.hasOwnProperty(a))return this._properties[a].getValue(this._saveData)}_getBeautifiedPropertyIfDefined(a){if(this._properties.hasOwnProperty(a))return this._beautifyPropertyValue(this._properties[a].getValue(this._saveData))}_beautifyPropertyValue(a){return a=a.split('_')[1],a=a.toLowerCase(),a=a.charAt(0).toUpperCase()+a.slice(1),a}_beautifyMapFileValue(a){return a=a.split('/').slice(-1)[0],a=a.split('\\').slice(-1)[0],a=a.substring(0,a.lastIndexOf('.')),a=a.replace(/_/g,' '),a}_setNewGameOption(a,b){let c=this._properties.gameOptionsMap.setValue(this._saveData,a,b);this._isNullOrUndefined(c)||(this._saveData=c)}}c['default']=i,i.GAME_MODES={SINGLE:'Single player',MULTI:'Multiplayer',HOTSEAT:'Hotseat'},i.TURN_TYPES={HYBRID:'Hybrid',SEQUENTIAL:'Sequential',SIMULTANEOUS:'Simultaneous'}},function(a){a.exports={fileSignature:{byteOffsetInSection:0,length:4,sectionByBuild:{98650:1},type:'string'},saveGameVersion:{byteOffsetInSection:4,length:4,sectionByBuild:{98650:1},type:'int'},gameVersion:{byteOffsetInSection:8,length:null,sectionByBuild:{230620:1},type:'string'},gameBuild:{byteOffsetInSection:null,length:null,sectionByBuild:{230620:1},type:'string'},currentTurn:{byteOffsetInSection:null,length:4,sectionByBuild:{98650:1},type:'int'},gameMode:{_comment:'This property exists in all versions but only seems to gain significance around build 230620',byteOffsetInSection:null,length:1,sectionByBuild:{98650:1},type:'int',values:['Single player','Multiplayer','Hotseat']},player1Civilization:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:'string'},difficulty:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:'string'},startingEra:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:'string'},currentEra:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:'string'},gamePace:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:'string'},mapSize:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:'string'},mapFile:{_comment:'The map file appears multiple times; I have no idea why (see section19Map)',byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:'string'},enabledDLC:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:'dlcStringArray'},section19Skip1:{byteOffsetInSection:264,length:null,sectionByBuild:{98650:17,262623:18,395070:19},type:'string'},section19Skip2:{byteOffsetInSection:null,length:7,sectionByBuild:{98650:17,262623:18,395070:19},type:'bytes'},section19Map:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:17,262623:18,395070:19},type:'string'},section19Skip3:{byteOffsetInSection:null,length:4,sectionByBuild:{98650:17,262623:18,395070:19},type:'bytes'},maxTurns:{_comment:'https://gaming.stackexchange.com/a/273907/154341',byteOffsetInSection:null,length:4,sectionByBuild:{98650:17,262623:18,395070:19},type:'int'},playerNames2:{_comment:'This seems to be the second place in the file with player names. There\'s enough space for 64 names',byteOffsetInSection:4,length:null,sectionByBuild:{98650:21,262623:22,395070:23},type:'stringArray'},section23Skip1:{byteOffsetInSection:null,length:4,sectionByBuild:{98650:21,262623:22,395070:23},type:'int'},turnTimerLength:{_comment:'https://steamcommunity.com/app/8930/discussions/0/864973761026018000/#c619568192863618582',byteOffsetInSection:null,length:4,sectionByBuild:{98650:21,262623:22,395070:23},type:'int'},playerColours:{_comment:'Starting with build 310700 this is a list of strings. Before that it\'s a list bytes. Seems like it can have 63 or 64 items.',byteOffsetInSection:4,length:null,sectionByBuild:{98650:23,262623:24,395070:25},type:'stringArray'},privateGame:{_comment:'https://github.com/Canardlaquay/Civ5SavePrivate',byteOffsetInSection:null,length:1,sectionByBuild:{98650:23,262623:24,395070:25},type:'bool'},section29Timer1:{byteOffsetInSection:269,length:null,sectionByBuild:{98650:27,262623:28,395070:29},type:'string'},section29Skip1:{byteOffsetInSection:null,length:12,sectionByBuild:{98650:27,262623:28,395070:29},type:'bytes'},section29TurnTimer:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:27,262623:28,395070:29},type:'string'},section29TxtKeyTurnTimer:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:27,262623:28,395070:29},type:'string'},section29Timer2:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:27,262623:28,395070:29},type:'string'},section29Skip2:{byteOffsetInSection:null,length:25,sectionByBuild:{98650:27,262623:28,395070:29},type:'bytes'},timeVictory:{_comment:'https://gaming.stackexchange.com/a/273907/154341',byteOffsetInSection:null,length:1,sectionByBuild:{98650:27,262623:28,395070:29},type:'bool'},scienceVictory:{_comment:'https://gaming.stackexchange.com/a/273907/154341',byteOffsetInSection:null,length:1,sectionByBuild:{98650:27,262623:28,395070:29},type:'bool'},dominationVictory:{_comment:'https://gaming.stackexchange.com/a/273907/154341',byteOffsetInSection:null,length:1,sectionByBuild:{98650:27,262623:28,395070:29},type:'bool'},culturalVictory:{_comment:'https://gaming.stackexchange.com/a/273907/154341',byteOffsetInSection:null,length:1,sectionByBuild:{98650:27,262623:28,395070:29},type:'bool'},diplomaticVictory:{_comment:'https://gaming.stackexchange.com/a/273907/154341',byteOffsetInSection:null,length:1,sectionByBuild:{98650:27,262623:28,395070:29},type:'bool'},section30Skip1:{_comment:'This section is 76 bytes long if either expansion pack is installed. Otherwise it\'s 72 bytes long.',byteOffsetInSection:4,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:'bytes'},section30MapSize1:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:'string'},section30TxtKeyMapHelp:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:'string'},section30Skip2:{byteOffsetInSection:null,length:8,sectionByBuild:{98650:28,262623:29,395070:30},type:'bytes'},section30MapSize2:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:'string'},section30TxtKeyMapSize:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:'string'},section30MapSize3:{_comment:'This section is 80 bytes long if Brave New World is installed. It\'s 76 bytes if only Gods and Kings is installed. Otherwise it\'s 72 bytes long.',byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:'string'},section30Skip3:{byteOffsetInSection:null,length:72,sectionByBuild:{98650:28,262623:29,395070:30},type:'bytes'},gameOptionsMap:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:'stringToBoolMap'}}},function(a,b,c){'use strict';var d=c(4),e=c(8),f=c(1),g=c(0),h=c(2),i=c(9);b.a=class{static fromType(a,b,c,j){switch(a){case'bool':return new d.a(b,c);case'bytes':return new g.a(b,c);case'dlcStringArray':return new e.a(b,j);case'int':return new f.a(b,c);case'string':return new h.a(b,c,j);case'stringToBoolMap':return new i.a(b,j);default:throw new Error(`Property type ${a} not handled`);}}}},function(a,b,c){'use strict';var d=c(1),e=c(2);b.a=class{constructor(a,b){if(this.byteOffset=a,this.length=4,this._array=[],this._size=new d.a(this.byteOffset,4,b),0<this._getSize(b)){let a=this.byteOffset+4;for(let c=0;c<this._getSize(b);c++){a+=20;let c=new e.a(a,null,b);a+=c.length,this._array.push(c.getValue(b))}this.length=a-this.byteOffset}Object.freeze(this._array)}_getSize(a){return this._size.getValue(a)}getArray(){return this._array}}},function(a,b,c){'use strict';var d=c(4),e=c(3),f=c(1),g=c(2);b.a=class{constructor(a,b){if(this.byteOffset=a,this.length=4,this._items=new Map,this._size=new f.a(this.byteOffset,4,b),0<this._getSize(b)){let a=this.byteOffset+4;for(let c=0;c<this._getSize(b);c++)a=this._addItemToMap(b,a)}}_addItemToMap(a,b){let c=new g.a(b,null,a);b+=c.length;let e=new d.a(b,4,a);return b+=e.length,this._items.set(c.getValue(a),e),this.length=b-this.byteOffset,b}_getSize(a){return this._size.getValue(a)}_setSize(a,b){this._size.setValue(a,b)}getValue(a,b){return!!this._items.has(b)&&this._items.get(b).getValue(a)}setValue(a,b,c){return this._items.has(b)?void this._items.get(b).setValue(a,c):this._addItemToSaveData(a,b,c)}_addItemToSaveData(a,b,c){this._setSize(a,this._getSize(a)+1);let d=this._int32ToUint8Array(b.length),f=this._stringToUint8Array(b),g=this._int32ToUint8Array(+c),h=this._concatTypedArrays(this._concatTypedArrays(d,f),g),i=this._insertIntoTypedArray(new Uint8Array(a.buffer),h,this.byteOffset+this.length),j=new e.a(i.buffer);return this._addItemToMap(j,this.byteOffset+this.length),j}_int32ToUint8Array(a){let b=new Uint8Array(4);for(let c,d=0;d<b.length;d++)c=255&a,b[d]=c,a=(a-c)/256;return b}_stringToUint8Array(a){let b=new Uint8Array(a.length);for(let c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b}_concatTypedArrays(d,a){var b=new d.constructor(d.length+a.length);return b.set(d,0),b.set(a,d.length),b}_insertIntoTypedArray(a,b,c){return this._concatTypedArrays(this._concatTypedArrays(a.slice(0,c),b),a.slice(c,a.length))}}}])});